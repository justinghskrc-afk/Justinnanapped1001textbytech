<meta name='viewport' content='width=device-width, initial-scale=1'/><!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FlashNews AI | ‡∏Ç‡πà‡∏≤‡∏ß‡∏£‡πâ‡∏≠‡∏ô ‡πÅ‡∏£‡∏á ‡∏ó‡∏∞‡∏•‡∏∏‡∏à‡∏≠!</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,400;0,700;0,900;1,900&family=Prompt:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@0.321.0/dist/umd/lucide.min.js"></script>
    <style>
        body {
            font-family: 'Prompt', sans-serif;
            background-color: #0f172a;
            color: white;
            overflow-x: hidden;
            margin: 0;
        }
        .beast-font { font-family: 'Kanit', sans-serif; }
        .glow-yellow:hover {
            box-shadow: 0 0 30px rgba(250, 204, 21, 0.4);
            transform: translateY(-8px) scale(1.01);
        }
        .hero-pattern {
            background: linear-gradient(rgba(15, 23, 42, 0.8), rgba(15, 23, 42, 1)), 
                        url('https://images.unsplash.com/photo-1677442136019-21780ecad995?auto=format&fit=crop&q=80&w=1600');
            background-size: cover;
            background-position: center;
        }
        .skeleton-anim {
            background: linear-gradient(90deg, #1e293b 25%, #334155 50%, #1e293b 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        .custom-scrollbar::-webkit-scrollbar { height: 6px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #4f46e5; border-radius: 10px; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useCallback } = React;

        // --- üîë ‡∏Å‡∏≥‡∏´‡∏ô‡∏î API KEY ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà üîë ---
        const newsDataApiKey ="pub_c711d3283ffc488dbc6caf2410001b34"; 
        const geminiApiKey = "AIzaSyAR6iVzxic_MzGiRW4JhX1Sg_Dh6jG1giY";

        const categories = [
            { id: 'top', label: '‡∏Ç‡πà‡∏≤‡∏ß‡πÄ‡∏î‡πà‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ', icon: 'zap' },
            { id: 'technology', label: '‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ', icon: 'cpu' },
            { id: 'business', label: '‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à', icon: 'trending-up' },
            { id: 'entertainment', label: '‡∏ö‡∏±‡∏ô‡πÄ‡∏ó‡∏¥‡∏á', icon: 'tv' },
            { id: 'sports', label: '‡∏Å‡∏µ‡∏¨‡∏≤', icon: 'trophy' },
            { id: 'health', label: '‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û', icon: 'heart-pulse' }
        ];

        // Component ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏î‡∏∂‡∏á Icon ‡∏à‡∏≤‡∏Å Lucide
        const Icon = ({ name, className }) => {
            useEffect(() => {
                if (window.lucide) window.lucide.createIcons();
            }, [name]);
            return <i data-lucide={name} className={className}></i>;
        };

        function FlashNewsApp() {
            const [news, setNews] = useState([]);
            const [loading, setLoading] = useState(true);
            const [activeCategory, setActiveCategory] = useState('top');
            const [error, setError] = useState(null);
            const [summarizing, setSummarizing] = useState({});

            const fetchNews = useCallback(async () => {
                if (newsDataApiKey === ("AIzaSyAR6iVzxic_MzGiRW4JhX1Sg_Dh6jG1giY") {
                    setError("pub_c711d3283ffc488dbc6caf2410001b34");
                    setLoading(false);
                    return;
                }

                setLoading(true);
                setError(null);
                try {
                    const url = `https://newsdata.io/api/1/news?apikey=${newsDataApiKey}&language=th&category=${activeCategory}`;
                    const response = await fetch(url);
                    const data = await response.json();

                    if (data.status === "error") {
                        throw new Error(data.results?.message || "API ‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á");
                    }
                    setNews(data.results || []);
                } catch (err) {
                    setError(err.message);
                } finally {
                    setLoading(false);
                }
            }, [activeCategory]);

            useEffect(() => {
                fetchNews();
            }, [fetchNews]);

            const summarizeWithAI = async (articleId, text, title) => {
                if (!geminiApiKey) {
                    alert("AIzaSyAR6iVzxic_MzGiRW4JhX1Sg_Dh6jG1giY");
                    return;
                }
          setSummarizing(prev => ({ ...prev, [articleId]: true }));
                
                try {
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${geminiApiKey}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{ parts: [{ text: `‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡πà‡∏≤‡∏ß‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢ 2 ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏™‡∏±‡πâ‡∏ô‡πÜ ‡πÄ‡∏ô‡πâ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏∑‡πà‡∏ô‡πÄ‡∏ï‡πâ‡∏ô‡πÅ‡∏ö‡∏ö MrBeast: ${title} - ${text}` }] }]
                        })
                    });
                    const data = await response.json();
                    const summary = data.candidates[0].content.parts[0].text;
                    
                    setNews(prev => prev.map(item => item.article_id === articleId ? { ...item, summary } : item));
                } catch (err) {
                    console.error("AI Error:", err);
                } finally {
                    setSummarizing(prev => ({ ...prev, [articleId]: false }));
                }
            };

            return (
                <div className="min-h-screen">
                    {/* Header Section */}
                    <header className="hero-pattern h-[50vh] flex flex-col items-center justify-center text-center p-6 border-b-8 border-indigo-600">
                        <h1 className="text-6xl md:text-8xl beast-font font-black italic tracking-tighter mb-4 text-white drop-shadow-[0_10px_10px_rgba(0,0,0,0.5)]">
                            FLASH<span className="text-yellow-400">NEWS</span> AI
                        </h1>
                        <p className="text-xl md:text-2xl font-bold bg-indigo-600 px-6 py-2 rounded-full transform -rotate-2">
                            ‡∏Ç‡πà‡∏≤‡∏ß‡πÑ‡∏ó‡∏¢‡∏ó‡∏µ‡πà‡πÄ‡∏£‡πá‡∏ß‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡πÇ‡∏•‡∏Å! ‚ö°Ô∏è
                        </p>
                    </header>

                    {/* Navigation */}
                    <nav className="sticky top-0 z-50 bg-slate-900/95 backdrop-blur-md border-b border-slate-700 py-4 shadow-xl">
                        <div className="max-w-6xl mx-auto flex gap-4 overflow-x-auto px-4 custom-scrollbar">
                            {categories.map(cat => (
                                <button
                                    key={cat.id}
                                    onClick={() => setActiveCategory(cat.id)}
                                    className={`flex items-center gap-2 px-6 py-3 rounded-full font-black whitespace-nowrap transition-all ${
                                        activeCategory === cat.id 
                                        ? 'bg-yellow-400 text-black scale-105 shadow-lg shadow-yellow-400/30' 
                                        : 'bg-slate-800 text-slate-400 hover:bg-slate-700'
                                    }`}
                                >
                                    <Icon name={cat.icon} className="w-5 h-5" />
                                    {cat.label}
                                </button>
                            ))}
                        </div>
                    </nav>

                    {/* Content Section */}
                    <main className="max-w-6xl mx-auto py-12 px-4">
                        {error ? (
                            <div className="bg-red-900/30 border-4 border-red-500 p-10 rounded-[3rem] text-center">
                                <Icon name="alert-circle" className="w-16 h-16 text-red-500 mx-auto mb-4" />
                                <h2 className="text-3xl font-black mb-4">‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡πà‡∏≠‡∏ô! ‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î</h2>
                                <p className="text-xl mb-6">{error}</p>
                                <button onClick={fetchNews} className="bg-white text-black px-8 py-3 rounded-full font-bold hover:bg-yellow-400 transition-colors">
                                    ‡∏•‡∏≠‡∏á‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
                                </button>
                            </div>
                        ) : loading ? (
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                                {[1,2,3,4].map(i => <div key={i} className="h-96 rounded-[2.5rem] skeleton-anim opacity-20"></div>)}
                            </div>
                        ) : (
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-10">
                                {news.map((item) => (
                                    <article key={item.article_id} className="bg-slate-800 rounded-[2.5rem] border-b-8 border-indigo-600 overflow-hidden transition-all duration-300 glow-yellow group">
                                        {item.image_url && (
                                            <div className="h-64 overflow-hidden">
                                                <img src={item.image_url} className="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500" alt="news" />
                                            </div>
                                        )}
                                        <div className="p-8">
                                            <div className="flex justify-between text-indigo-400 font-bold text-sm mb-3 uppercase">
                                                <span>{item.source_id}</span>
                                                <span>{new Date(item.pubDate).toLocaleDateString('th-TH')}</span>
                                            </div>
                                            <h2 className="text-2xl font-black italic mb-4 leading-tight group-hover:text-yellow-400">
                                                {item.title}
                                            </h2>
                                            
                                            {item.summary ? (
                                                <div className="bg-indigo-900/40 p-5 rounded-2xl border-l-4 border-yellow-400 mb-6 animate-fadeIn">
                                                    <p className="text-white italic leading-relaxed">
                                                        <span className="text-yellow-400 font-black">AI ‡∏™‡∏£‡∏∏‡∏õ‡πÉ‡∏´‡πâ: </span>{item.summary}
                                                    </p>
                                                </div>
                                            ) : (
                                                <p className="text-slate-400 mb-6 line-clamp-3 leading-relaxed">{item.description}</p>
                                            )}

                                            <div className="flex flex-col gap-3">
                                                <button 
                                                    onClick={() => summarizeWithAI(item.article_id, item.description, item.title)}
                                                    className="bg-indigo-600 hover:bg-indigo-500 py-3 rounded-2xl font-black flex items-center justify-center gap-2"
                                                    disabled={summarizing[item.article_id]}
                                                >
                                                    {summarizing[item.article_id] ? "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏£‡∏∏‡∏õ..." : "‚ú® ‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡πà‡∏≤‡∏ß‡∏î‡πâ‡∏ß‡∏¢ AI"}
                                                </button>
                                                <a href={item.link} target="_blank" className="bg-yellow-400 text-black py-4 rounded-2xl font-black text-center text-lg hover:bg-white transition-colors">
                                                    ‡∏≠‡πà‡∏≤‡∏ô‡∏Ç‡πà‡∏≤‡∏ß‡∏ï‡πâ‡∏ô‡∏â‡∏ö‡∏±‡∏ö
                                                </a>
                                            </div>
                                        </div>
                                    </article>
                                ))}
                            </div>
                        )}
                    </main>

                    <footer className="py-12 text-center text-slate-500 font-bold border-t border-slate-800">
                        FLASHNEWS AI - ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ö‡∏±‡∏ô‡πÄ‡∏ó‡∏¥‡∏á‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£
                    </footer>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<FlashNewsApp />);
    </script>
</body>
</html>
